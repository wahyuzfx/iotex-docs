(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{633:function(e,t,a){"use strict";a.r(t);var s=a(37),i=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("This document is not updated.")])]),e._v(" "),a("h1",{attrs:{id:"configure-thingsboard-rulechain"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-thingsboard-rulechain"}},[e._v("#")]),e._v(" Configure Thingsboard Rulechain")]),e._v(" "),a("p",[e._v("We use the Rule Engine of Thingsboard to send messages to the blockchain:")]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/developer/pebble-backend/thingsboard-rules.jpg",alt:""}})]),e._v(" "),a("p",[e._v('A thingsboard rule chain works such that any MQTT message sent to the Thingsboard server will enter the "chain" from the "input" node, and then flows into the chain being "processed", "analized" or "filtered" by the following nodes.')]),e._v(" "),a("p",[e._v("To integrate with the IoTeX blockchain using this method you must "),a("a",{attrs:{href:"pebble-backend-configuration"}},[e._v("deploy your own Pebble Backend Server")]),e._v(", then:")]),e._v(" "),a("ol",[a("li",[e._v("Access your Thingsboard server on port 8080, in Thingsboard, click the "),a("strong",[e._v("Rule Chains")]),e._v(" from the left navigation panel, finally click the "),a("code",[e._v("+")]),e._v("button then "),a("code",[e._v("Import")]),e._v(" to import a rule chain:")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/developer/pebble-blockchain/thingsboard-add-rulechain.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"filter-the-message-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filter-the-message-type"}},[e._v("#")]),e._v(" Filter the message type")]),e._v(" "),a("p",[e._v('The first node after the input is named "message type CommonData". This node checks the type of the received message, if the type is "Post Telemetry" (i.e. that\'s the message that includes Pebble\' telemetry data) it will be transmitted to the "Script FilterGateway" node, otherwise it will be sent to the logs.')]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/developer/pebble-backend/thingsboard-messageType.jpg",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"swicth-device-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swicth-device-type"}},[e._v("#")]),e._v(" Swicth device type")]),e._v(" "),a("p",[e._v('When a message enters the "script FilterGateway" node, the "deviceType" will be checked: if it is not "Gateway" (that\'s because the data entering Thingsboard comes through the Gateway device we configured, which produces data of type "Gateway", which needs to be filtered out), the it will be transmitted to the "rest api call Push Blockchain" node.')]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/developer/pebble-backend/thingsboard-deviceType.jpg",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"push-data-to-the-blockchain"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#push-data-to-the-blockchain"}},[e._v("#")]),e._v(" Push data to the blockchain:")]),e._v(" "),a("p",[e._v("When a message enters the \"rest api call Push Blockchain\" node, it's can only be a devices' post telemetries message. This node will then use the url set in its configuration to send the message data in a POST message to the api server.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/img/developer/pebble-backend/thingsboard-apiCurl.jpg",alt:""}})])])}),[],!1,null,null,null);t.default=i.exports}}]);